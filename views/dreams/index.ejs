<%- include ('../partials/header') %>

<body>
    <% if(user) { %> 
        <h1>Dreams folder, Index.ejs</h1>

<% let publishedDreams = []; %>

<% dreams.forEach(dream => { %>
    <% if (dream.published == "on") { %>
        <% publishedDreams.push(dream) %>
    <% }}); %>


<% function dreamPicker() { %>
    <% let randomNumber = Math.floor(Math.random() * (publishedDreams.length)); %>
    <li>
        <a href="/dreams/<%= publishedDreams[randomNumber]._id %>">
            <%= publishedDreams[randomNumber].dream %></a>
    </li>
<% }; %>

<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>
<%= dreamPicker() %>




        <a href="/home">Home</a>
        <a href="/dreamers/<%= user.id %>">My Profile</a>
    <% } else { %>
        <p>You must be <span><a href="/auth/google">logged in</a></span> to view this page.</p>
    <% } %>

</body>